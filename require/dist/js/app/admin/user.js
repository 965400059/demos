define("admin/user/login",["require","exports","module"],function(e,a,i){a.init=function(){e(["util","api/user"],function(e){$("#loginBtn").click(function(){if($("#loginFrom").data("bootstrapValidator").validate().isValid()){var e={param:$("[name=param]").val(),pwd:$("[name=pwd]").val()};$.post($.paths.admin+"/user/login.do",e,function(e){e.flag?(window.sessionStorage.setItem("admin",JSON.stringify(e.data)),window.location.href=$.paths.admin+"/user/homepage.do"):($(".error").text("账号或者密码不正确"),$("[name=pwd]").val(""))},"json")}}),$(document).keyup(function(e){13==e.keyCode&&$("#loginBtn").trigger("click")}),$("#loginFrom").bootstrapValidator({message:"This value is not valid",feedbackIcons:{valid:"glyphicon glyphicon-ok",invalid:"glyphicon glyphicon-remove",validating:"glyphicon glyphicon-refresh"},fields:{param:{validators:{notEmpty:{message:"用户名不能为空！"},stringLength:{min:6,max:30,message:"用户名长度为6~30位。"}}},pwd:{validators:{notEmpty:{message:"密码不能为空！"},stringLength:{min:6,max:30,message:"密码长度为6~30位。"}}}}})})}}),define("admin/user/header",["require","exports","module"],function(e,a,i){a.init=function(){e(["util","tmpl"],function(e){$("#realName").text(null==ADMIN_USER.realName?"":ADMIN_USER.realName),$("#menuContent").tmpl(ADMIN_USER.remark).appendTo("#menuList");var a=window.location.href;$(".navbar-nav li").each(function(e,i){var n=$(this).find("a").attr("href");if("javascript:;"==n){var t=!1,o=$(i);if(o.find("li").each(function(e,i){var n=$(i).find("a").attr("href");if(a.indexOf(n)>0)return t=!0,o.find("a").click(),$(this).addClass("active"),!1}),t)return!1}if(a.indexOf(n)>0)return $(this).addClass("active"),!1}),$("#updatePwd").click(function(){layer.open({type:2,title:"修改密码",shadeClose:!0,shade:.8,area:["380px","400px"],content:$.paths.admin+"/user/updatePage.do"})}),$("#logout").click(function(){layer.confirm("是否退出登录！",{btn:["退出","取消"]},function(){sessionStorage.removeItem("admin"),window.location.href=$.paths.admin+"/user/loginV.do"})})})}}),define("admin/user/updatePage",["require","exports","module"],function(e,a,i){a.init=function(){e(["util","api/user"],function(e){$("input[name=mobile]").val(ADMIN_USER.mobile),$("#pwdFormBtn").click(function(){if($("#pwdForm").data("bootstrapValidator").isValid()){var e=$("input[name=oldPwd]").val(),a=$("input[name=pwd]").val(),i={id:ADMIN_USER.id,oldPwd:e,password:a};$._post($.paths.admin+"/employee/modify.do",i,function(e){e.success?layer.confirm(e.errMsg+",请重新登录",{btn:["确定"]},function(){var e=parent.layer.getFrameIndex(window.name);parent.layer.close(e),sessionStorage.removeItem("admin"),parent.location.href=$.paths.admin+"/user/loginV.do"}):layer.confirm(e.errMsg,{btn:["确定"]},function(){location.reload()})})}}),$("#pwdForm").bootstrapValidator({message:"This value is not valid",feedbackIcons:{valid:"glyphicon glyphicon-ok",invalid:"glyphicon glyphicon-remove",validating:"glyphicon glyphicon-refresh"},fields:{oldPwd:{validators:{notEmpty:{message:"原密码不能为空！"},stringLength:{min:6,max:30,message:"原密码长度为6~30位。"}}},pwd:{validators:{notEmpty:{message:"新密码不能为空！"},stringLength:{min:6,max:30,message:"新密码长度为6~30位。"}}},qrPwd:{validators:{notEmpty:{message:"新密码不能为空！"},identical:{field:"pwd",message:"跟新密码不一致。"}}}}})})}}),define("admin/user",["require","exports","module","admin/user/login","admin/user/header","admin/user/updatePage"],function(e,a,i){return{login:e("admin/user/login"),header:e("admin/user/header"),updatePage:e("admin/user/updatePage")}});