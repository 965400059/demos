!function(w){"use strict";var F="ht",A=w[F],J=A.Default,x=Math,D=(x.PI,x.sin,x.cos,x.atan2,x.sqrt,x.max),V=x.floor,C=(x.round,x.ceil),I=A.Shape,p=(A.Edge,A.List),l=A.Style,M=A.graph,q=J.getInternal(),b=q.ui(),U=null,c="prototype",N=w.clearInterval,e=w.setInterval,B=function(d){var C=d.data,s=this.dm();if(C&&"add"===d.kind){var o=s.$1c,n=C instanceof I?"shape.":"edge.";o&&C.s(n+"dash.flow")&&o.indexOf(C)<0&&o.push(C)}"clear"===d.kind&&(s.$1c=[])},z=function($){var P=$.property,u=$.data,c=$.newValue,o=this.dm().$1c,S=u instanceof I?"s:shape.dash.flow":"s:edge.dash.flow";if(o&&P===S)if(c)o.indexOf(u)<0&&o.push(u);else for(var X=o.length,G=0;X>G;G++)if(o[G]===u){o.splice(G,1);break}},Z=M.GraphView[c],o=b.EdgeUI[c],s=b.ShapeUI[c],j=s._80o,n=o._80o,R=A.DataModel[c],G=R.prepareRemove,W=Z.setDataModel;l["edge.dash.flow.step"]==U&&(l["edge.dash.flow.step"]=3),l["shape.dash.flow.step"]==U&&(l["shape.dash.flow.step"]=3),R.prepareRemove=function(K){G.call(this,K);var O=K._dataModel,U=O.$1c;if(U)for(var Z=U.length,R=0;Z>R;R++)if(U[R]===K){U.splice(R,1);break}},Z.setDataModel=function(C){var a=this,q=a._dataModel;if(q!==C){q&&(q.umm(B,a),q.umd(z,a),q.$1c=[]),C.mm(B,a),C.md(z,a);var j=C.$1c=[];C.each(function(O){var m=O instanceof I?"shape.":"edge.";O.s(m+"dash.flow")&&j.indexOf(O)<0&&j.push(O)}),W.call(a,C)}},Z.setDashFlowInterval=function(m){var S=this,Q=S.$2c;S.$2c=m,S.fp("dashFlowInterval",Q,m),S.$3c!=U&&(N(S.$3c),delete S.$3c,S.enableDashFlow(m))},Z.getDashFlowInterval=function(){return this.$2c},Z.$4c=function(){var O,r,X,W=this,Z=W.tx(),y=W.ty(),P=W._zoom,$=W.getWidth(),d=W.getHeight(),o={x:-Z/P,y:-y/P,width:$/P,height:d/P},k=W.dm().$1c,z=W._56I,g=new p;if(k.forEach(function(P){z[P.getId()]&&(O=W.getDataUI(P),O&&(X=O._79o(),X&&g.add(X)))}),0!==g.size()&&(g.each(function(E){J.intersectsRect(o,E)&&(r=J.unionRect(r,E))}),r&&(r&&(J.grow(r,D(1,1/P)),r.x=V(r.x*P)/P,r.y=V(r.y*P)/P,r.width=C(r.width*P)/P,r.height=C(r.height*P)/P,r=J.intersection(o,r)),r))){var L=W._canvas.getContext("2d");L.save(),L.lineCap=J.lineCap,L.lineJoin=J.lineJoin,q.translateAndScale(L,Z,y,P),L.beginPath(),L.rect(r.x,r.y,r.width,r.height),L.clip(),L.clearRect(r.x,r.y,r.width,r.height),W.$5c(L,r),L.restore()}},Z.$5c=function($,e){var m,Z,f=this;f._93db($),f.each(function(B){f._56I[B._id]&&(m=f.getDataUI(B),m&&(Z=m._79o(),(!e||J.intersectsRect(e,Z))&&(m.$7c=!0,m._42($),delete m.$7c)))}),f._92db($)},Z.enableDashFlow=function(M){var i=this;i.$3c==U&&(i.$3c=e(function(){i.$4c()},M||i.$2c||50))},Z.disableDashFlow=function(){var Z=this;N(Z.$3c),delete Z.$3c};var u=function(){var j=this,l=j._data,N=l instanceof I?"shape.":"edge.",a=l.s(N+"dash.pattern"),$=l.s(N+"dash.flow.reverse");if(a&&l.s(N+"dash")&&l.s(N+"dash.flow")&&j.$7c){var f=j.s(N+"dash.offset")||0,B=l.s(N+"dash.flow.step"),T=l.getStyleMap(),t=0;a.forEach(function(d){t+=d}),$&&(B=-B),f-=B,f%=t,T||(l._styleMap=T={}),T[N+"dash.offset"]=f}};o._80o=function(O){n.call(this,O),u.call(this)},s._80o=function(A){j.call(this,A),u.call(this)}}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);