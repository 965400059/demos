!function(U,r){"use strict";var C="ht",R=C+".graph.",S=U[C],k=S.graph,h=S.Default,Q=S.Color,l=null,M="px",n=h.getInternal(),O=n.getPinchDist,B=h.preventDefault,t=h.getTouchCount,K=h.startDragging;n.addMethod(h,{overviewBackground:Q.widgetBackground,overviewMaskBackground:Q.transparent,overviewContentBorderColor:Q.widgetBorder,overviewContentBackground:Q.background},!0),k.Overview=function(t){var f=this,S=f._view=n.createView(1,f);f._canvas=n.createCanvas(S),S.style.background=h.overviewBackground,S.appendChild(f._mask=n.createDiv()),f.setGraphView(t),f.addListeners()},h.def(R+"Overview",r,{ms_v:1,ms_fire:1,ms_listener:1,ms_ac:["maskBackground","contentBorderColor","contentBackground","autoUpdate"],_autoUpdate:!0,_rate:1,_scrollRect:{x:0,y:0,width:0,height:0},_maskBackground:h.overviewMaskBackground,_contentBorderColor:h.overviewContentBorderColor,_contentBackground:h.overviewContentBackground,getGraphView:function(){return this.gv},setGraphView:function(d){var j=this;if(j.gv!==d){var z=j.gv;j.gv=d,z&&(z.removeViewListener(j.handleGraphViewChanged,j),z.ump(j.handleGraphViewPropertyChanged,j)),d&&(d.addViewListener(j.handleGraphViewChanged,j),d.mp(j.handleGraphViewPropertyChanged,j)),j.fp("graphView",z,d),j.redraw()}},getCanvas:function(){return this._canvas},getMask:function(){return this._mask},dispose:function(){this.setGraphView(null)},onPropertyChanged:function(){this.redraw()},handleGraphViewChanged:function(h){this._autoUpdate&&"validate"===h.kind&&this.redraw()},handleGraphViewPropertyChanged:function(W){"canvasBackground"===W.property&&this.redraw()},redraw:function(){var B=this;B._redraw||(B._redraw=1,B.iv(50))},validateImpl:function(){var k=this,C=k.gv,w=k._canvas,W=k.getWidth(),$=k.getHeight(),g=k._redraw;if(C){var E=k._mask,y=E.style,c=C.getViewRect(),K=C.getScrollRect(),r=K.x,X=K.y,N=K.width,I=K.height,O=k._rate=Math.max(N/W,I/$),i=k._x=(W-N/O)/2,b=k._y=($-I/O)/2;if(0!==c.width&&0!==c.height||k.hasRetry||(h.callLater(k.iv,k,l),k.hasRetry=!0),(W!==w.clientWidth||$!==w.clientHeight)&&(n.setCanvas(w,W,$),g=1),n.isSameRect(K,k._scrollRect)||(k._scrollRect=K,g=1),g){var o=n.initContext(w),D=C.getDataModel().getBackground()||k._contentBackground,x=k._contentBorderColor,J=h.devicePixelRatio;o.clearRect(0,0,W*J,$*J),D&&n.fillRect(o,i*J,b*J,N/O*J,I/O*J,D),n.translateAndScale(o,-r/O+i,-X/O+b,1/O),C._42(o),o.restore(),x&&n.drawBorder(o,x,i*J,b*J,N/O*J,I/O*J)}y.background=k._maskBackground,y.left=i+(c.x-r)/O+M,y.top=b+(c.y-X)/O+M,y.width=c.width/O+M,y.height=c.height/O+M,k._redraw=null}else if(g){var o=n.initContext(w);o.clearRect(0,0,W,$),o.restore(),k._redraw=null}},center:function(J){var V=this,S=V.gv;if(S){var U=S._zoom,I=S._29I,n=V._rate,R=V._scrollRect,N=h.getLogicalPoint(J,V._canvas),o=R.x+(N.x-V._x)*n,Q=R.y+(N.y-V._y)*n;S.setTranslate((I.width/2-o)*U,(I.height/2-Q)*U)}},handle_mousedown:function(H){this.handle_touchstart(H)},handleWindowMouseUp:function(j){this.handleWindowTouchEnd(j)},handleWindowMouseMove:function(F){this.handleWindowTouchMove(F)},handle_mousewheel:function(A){this.handleScroll(A,A.wheelDelta)},handle_DOMMouseScroll:function(k){2===k.axis&&this.handleScroll(k,-k.detail)},handleScroll:function(O,u){if(B(O),this.gv){var i=this.gv;u>0?i.scrollZoomIn():0>u&&i.scrollZoomOut()}},handle_touchstart:function(q){if(B(q),this.gv&&h.isLeftButton(q)){var H=this,k=H.gv,e=t(q);1===e?h.isDoubleClick(q)&&k.isResettable()?k.reset():(H.center(q),K(H,q)):2===e&&(H._dist=O(q),K(H,q))}},handleWindowTouchEnd:function(){delete this._dist},handleWindowTouchMove:function(C){if(this.gv){var f=this,Z=f._dist,V=t(C);1===V?f.center(C):2===V&&Z!=l&&f.gv.handlePinch(l,O(C),Z)}}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);